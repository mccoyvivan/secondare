(function($){'use strict';$.fn.pdsAccordionItem=function(options){var settings=$.extend({initiallyOpen:!1,autoClose:!0,clickToClose:!0,scroll:!1,scrollOffset:!1,},options);var duration=250;var hashID=window.location.hash.replace('#','');var item={};item.self=$(this);item.id=$(this).attr('id');item.controller=$(this).children('.pds-js-accordion-controller');item.uuid=getAccordionItemUUID(item.self);item.content=$('#ac-'+item.uuid);item.accordionGroupItems=[item.uuid];item.accordionAncestorItems=[];(function initialSetup(){item.self.removeClass('pds-no-js');item.controller.attr({'tabindex':0,'aria-controls':'ac-'+item.uuid,});settings.scrollOffset=Math.floor(parseInt(settings.scrollOffset,10))||0;$.each(item.self.siblings('.pds-js-accordion-item'),function(index,ele){var uuid=getAccordionItemUUID(ele);item.accordionGroupItems.push(uuid)});$.each(item.self.parents('.pds-js-accordion-item'),function(index,ele){var uuid=getAccordionItemUUID(ele);item.accordionAncestorItems.push(uuid)});if(settings.initiallyOpen){setOpenItemAttributes()}else if(item.id===hashID){openItem();$.each(item.accordionAncestorItems,function(index,uuid){$(document).trigger('pds-openAncestorAccordionItem',uuid)})}else{setCloseItemAttributes()}})();function clickHandler(){if(!item.self.hasClass('is-open')){openItem()}else if(settings.clickToClose){closeItem()}
return!1}
function getAccordionItemUUID(ele){return $(ele).children('.pds-js-accordion-controller').attr('id').replace('at-','')}
function openItem(){setOpenItemAttributes();item.content.clearQueue().stop().slideDown(duration,function(){if(settings.scroll){setTimeout(function(){$('html, body').animate({scrollTop:item.self.offset().top-settings.scrollOffset},duration)},duration)}});$(document).trigger('pds-openAccordionItem',item)}
function setOpenItemAttributes(){item.self.addClass('is-open is-read');item.controller.attr('aria-expanded',!0);item.content.prop('hidden',!1)}
function closeItem(){item.content.slideUp(duration,function(){setCloseItemAttributes()})}
function setCloseItemAttributes(){item.self.removeClass('is-open');item.controller.attr('aria-expanded',!1);item.content.attr('hidden',!0)}
function maybeCloseItem(){if(settings.autoClose&&item.self.hasClass('is-open')){closeItem()}}
item.controller.on('click',clickHandler);$(document).on('pds-openAccordionItem',function(event,ele){if(ele!==item&&ele.accordionGroupItems.indexOf(item.uuid)>0&&ele.accordionAncestorItems.indexOf(item.uuid)===-1){maybeCloseItem()}});$(document).on('pds-openAncestorAccordionItem',function(event,uuid){if(uuid===item.uuid){openItem()}});item.controller.on('keydown',function(event){var code=event.which;if(item.controller.prop('tagName')!=='BUTTON'){if((code===13)||(code===32)){$(this).click()}}
if(code===27){maybeCloseItem()}});$(window).on('hashchange',function(){hashID=window.location.hash.replace('#','');if(hashID===item.id){var ele=$('#'+hashID);if(ele.length&&ele.hasClass('pds-js-accordion-item')){openItem();$.each(item.accordionAncestorItems,function(index,uuid){$(document).trigger('pds-openAncestorAccordionItem',uuid)})}}});return this};function initializeNewAccordions(){$('.pds-js-accordion-item.pds-no-js').each(function(){$(this).pdsAccordionItem({initiallyOpen:$(this).data('initially-open'),autoClose:$(this).data('auto-close'),clickToClose:$(this).data('click-to-close'),scroll:$(this).data('scroll'),scrollOffset:$(this).data('scroll-offset'),})})}
$(window).on('load',initializeNewAccordions);$(document).on('pds--apply-widgets pds-accordion--apply-widgets',initializeNewAccordions)}(jQuery))